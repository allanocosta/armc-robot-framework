# Python package
# Create and test a Python package on multiple Python versions.
# Add steps that analyze code, save the dist with the build record, publish to a PyPI-compatible index, and more:
# https://docs.microsoft.com/azure/devops/pipelines/languages/python

trigger:
  - '*'
jobs:
  - job: Run Mobile Testa
    strategy:
      matrix:
        browser: [chromium, firefox, webkit]

  - job: ConfigureEnv
    displayName: "Print Browsers"
    pool:
      vmImage: 'ubuntu-latest'

    steps:
    - script: echo "Executando o job nos navegadores $browser"
    - task: UsePythonVersion@0
      inputs:
        versionSpec: '3.10'
        addToPath: true
      displayName: "Use Python 3.10"

    - bash: pip install -r web_requirements.txt

  - job: RunTests
    displayName: "Run Web Tests"
    dependsOn: ConfigureEnv
    steps:
    - script: robot -d ./logs_web -x output-xunit.xml --listener RetryFailed --variable BROWSER:$browser -e servicetest -e mobiletest .
    continueOnError: true
