[tox]
envlist	= servicetests,servicetests-local,mobiletests,mobiletests-local,webtests,webtests-local
skipsdist	=	true
parallel=true
parallel_show_output=false

[testenv]
description = executa o tidy para formatar os arquivos .resource e .robot, faz a verificação do código com o robocop
parallel_show_output=false
deps =
  servicetests-local: -r service-local_requirements.txt
  servicetests: -r service_requirements.txt
  mobiletests-local: -r mobile-local_requirements.txt
  mobiletests: -r mobile_requirements.txt
  webtests-local: -r web-local_requirements.txt
  webtests: -r web_requirements.txt

commands_pre =
  robotidy --config .\pyproject.toml ./**/*.resource
	robotidy --config .\pyproject.toml ./**/*.robot
  robocop -e missing-space-after-comment -e missing-doc-keyword -e empty-lines-between-sections --reports timestamp,all
commands =
  servicetests: robot -d ./logs_service -x output-xunit.xml -e mobiletest -e webtest {posargs}
  mobiletests: robot -d ./logs_mobile -x output-xunit.xml -e servicetest -e webtest {posargs}
	webtests: robot -d ./logs_web -x output-xunit.xml -e servicetest -e mobiletest {posargs}
	webtests-local: robot -d ./logs_web -x output-xunit.xml -e servicetest -e mobiletest {posargs}
