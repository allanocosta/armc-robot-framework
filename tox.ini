[tox]
envlist	= tidy,lint,servicetests,mobiletests,webtests
skipsdist	=	true
parallel=true
parallel_show_output=false

[testenv:tidy]
description = executa o tidy para formatar os arquivos .resource e .robot
parallel_show_output=false
deps =
	tidy: robotframework-tidy
	tests: -r requirements.txt
commands =
	tidy: robotidy --config .\pyproject.toml ./**/*.resource
	tidy: robotidy --config .\pyproject.toml ./**/*.robot

[testenv:servicetests]
parallel=true
parallel_show_output=true
deps =
	servicetests: -r requirements.txt
commands =
	lint: robocop --reports timestamp,all
	servicetests: robot -d .logs_service -e mobiletest -e webtest {posargs}

[testenv:mobiletests]
parallel=true
parallel_show_output=true
deps =
	mobiletests: -r requirements.txt
commands =
	lint: robocop --reports timestamp,all
	mobiletests: robot -d .logs_mobile -e servicetest -e webtest {posargs}

[testenv:webtests]
parallel=true
parallel_show_output=true
deps =
	webtests: -r requirements.txt
commands =
	lint: robocop --reports timestamp,all
	webtests: rfbrowser init
	webtests: robot -d .logs_web -e servicetest -e mobiletest {posargs}
